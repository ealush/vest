{"version":3,"file":"vest.js","sources":["../node_modules/n4s/dist/enforce.min.js","../node_modules/anyone/any/index.js","../src/lib/globalObject/index.js","../src/lib/throwError/index.js","../src/lib/singleton/constants.js","../src/lib/singleton/index.js","../src/core/Context/index.js","../src/hooks/constants.js","../src/hooks/exclusive/constants.js","../src/hooks/exclusive/index.js","../src/core/test/lib/TestObject/index.js","../src/core/test/index.js","../src/core/suiteResult/index.js","../src/core/validate/constants.js","../src/core/validate/index.js","../src/hooks/draft/index.js","../src/hooks/warn/constants.js","../src/hooks/warn/index.js","../src/constants.js","../src/index.js"],"sourcesContent":["!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(n=n||self).enforce=e()}(this,(function(){\"use strict\";function n(e){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":typeof n})(e)}function e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function r(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){e(n,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}var o=function(n,e){var t,r=Object.prototype.hasOwnProperty.call(n,e)&&\"function\"==typeof n[e];return r||(t='Rule \"'.concat(e,'\" was not found in rules object. Make sure you typed it correctly.'),setTimeout((function(){throw new Error(\"[\".concat(\"enforce\",\"]: \").concat(t))}))),r},u=Function(\"return this\")(),i=function(){return\"function\"==typeof u.Proxy};function c(n){return Boolean(Array.isArray(n))}function a(n){return Boolean(\"number\"==typeof n)}function f(n){return Boolean(\"string\"==typeof n)}function s(n,e){return e instanceof RegExp?e.test(n):\"string\"==typeof e&&new RegExp(e).test(n)}function l(e,t){return Array.isArray(t)&&[\"string\",\"number\",\"boolean\"].includes(n(e))?t.includes(e):\"string\"==typeof t&&\"string\"==typeof e&&t.includes(e)}function y(n,e){return n===e}function p(n){var e=!isNaN(parseFloat(n))&&!isNaN(Number(n))&&isFinite(n);return Boolean(e)}function b(n,e){return p(n)&&p(e)&&Number(n)===Number(e)}function g(e){return!e||(p(e)?0===e:Object.prototype.hasOwnProperty.call(e,\"length\")?0===e.length:\"object\"!==n(e)||0===Object.keys(e).length)}function m(n,e){return p(n)&&p(e)&&Number(n)>Number(e)}function v(n,e){return p(n)&&p(e)&&Number(n)>=Number(e)}function h(n,e){return p(n)&&p(e)&&Number(n)<Number(e)}function O(n,e){return p(n)&&p(e)&&Number(n)<=Number(e)}function d(n,e){return n.length===e}c.negativeForm=\"isNotArray\",a.negativeForm=\"isNotNumber\",f.negativeForm=\"isNotString\",s.negativeForm=\"notMatches\",l.negativeForm=\"notInside\",y.negativeForm=\"notEquals\",p.negativeForm=\"isNotNumeric\",b.negativeForm=\"numberNotEquals\",g.negativeForm=\"isNotEmpty\",m.alias=\"gt\",v.alias=\"gte\",h.alias=\"lt\",O.alias=\"lte\",d.negativeForm=\"lengthNotEquals\";function N(n){return!!n}N.negativeForm=\"isFalsy\";var j=function(n){var e=function(e){var t=n[e].negativeForm,r=n[e].alias;t&&(n[t]=function(){return!n[e].apply(n,arguments)}),r&&(n[r]=n[e])};for(var t in n)e(t);return n}({isArray:c,isNumber:a,isString:f,matches:s,inside:l,equals:y,numberEquals:b,isNumeric:p,isEmpty:g,greaterThan:m,greaterThanOrEquals:v,lessThan:h,lessThanOrEquals:O,longerThan:function(n,e){return n.length>e},longerThanOrEquals:function(n,e){return n.length>=e},shorterThan:function(n,e){return n.length<e},shorterThanOrEquals:function(n,e){return n.length<=e},lengthEquals:d,isOdd:function(n){return!!p(n)&&n%2!=0},isEven:function(n){return!!p(n)&&n%2==0},isTruthy:N});function w(e,t){if(\"function\"==typeof e){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];if(!0!==e.apply(void 0,[t].concat(o)))throw new Error(\"[Enforce]: invalid \".concat(n(t),\" value\"))}}function E(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},j,{},n);if(i())return function(n){var e=new Proxy(t,{get:function(t,r){if(o(t,r))return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return w.apply(void 0,[t[r],n].concat(u)),e}}});return e};var u=Object.keys(t);return function(n){return u.reduce((function(u,i){return Object.assign(u,r({},o(t,i)&&e({},i,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return w.apply(void 0,[t[i],n].concat(r)),u}))))}),{})}}var F=new E;return F.Enforce=E,F}));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = global || self, global.any = factory());\n}(this, function () { 'use strict';\n\n    /**\n     * Accepts a value or a function, and coerces it into a boolean value\n     * @param {*|Function} [arg] Any expression or value\n     * @return {Boolean}\n     */\n    var run = function run(arg) {\n      if (typeof arg === 'function') {\n        try {\n          var output = arg();\n          return output != false && Boolean(output); // eslint-disable-line\n        } catch (err) {\n          return false;\n        }\n      }\n\n      return arg != false && Boolean(arg); // eslint-disable-line\n    };\n\n    /**\n     * Checks that at least one passed argument evaluates to a truthy value.\n     * @param  {[]*} [args] Any amount of values or expressions.\n     * @returns {Boolean}\n     */\n\n    var any = function any() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return args.some(run);\n    };\n\n    return any;\n\n}));\n","/**\n * @type {Object} Reference to global object.\n */\nconst globalObject = Function('return this')();\n\nexport default globalObject;\n","/**\n * Throws a timed out error.\n * @param {String} message  Error message to display.\n * @param {Error} [type]    Alternative Error type.\n */\nconst throwError = (message, type = Error) => setTimeout(() => {\n    throw new type(`[Vest]: ${message}`);\n});\n\nexport default throwError;\n","/**\n * @type {String} Vest's major version.\n */\nconst VEST_MAJOR = VEST_VERSION.split('.')[0];\n\n/**\n * @type {Symbol} Used to store a global instance of Vest.\n */\nexport const SYMBOL_VEST = Symbol.for(`VEST#${VEST_MAJOR}`);\n","import throwError from '../throwError';\nimport go from '../globalObject';\nimport { SYMBOL_VEST } from './constants';\n\n/**\n * Throws an error when multiple versions of Vest are detected on the same runtime.\n * @param  {String[]} versions List of detected Vest versions.\n */\nconst throwMultipleVestError = (...versions) => {\n    throwError(`Multiple versions of Vest detected: (${versions.join()}).\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version.`);\n};\n\n/**\n * Registers current Vest instance on global object.\n * @param {Object} vest Reference to Vest.\n * @return {Function} Global Vest reference.\n */\nconst register = (vest) => {\n\n    const existing = go[SYMBOL_VEST];\n\n    if (existing) {\n        if (existing.VERSION !== vest.VERSION) {\n            throwMultipleVestError(vest.VERSION, existing.VERSION);\n        }\n    } else {\n        go[SYMBOL_VEST] = vest;\n    }\n\n    return go[SYMBOL_VEST];\n};\n\n/**\n * @returns Global Vest instance.\n */\nconst use = () => go[SYMBOL_VEST];\n\n/**\n * @returns Current Vest context.\n */\nconst useContext = () => use().ctx;\n\nexport default {\n    use,\n    useContext,\n    register\n};\n","import { singleton } from '../../lib';\n\n/**\n * Creates a new context object, and assigns it as a static property on Vest's singleton.\n * @param {Object} parent   Parent context.\n */\nfunction Context(parent) {\n    singleton.use().ctx = this;\n    Object.assign(this, parent);\n}\n\n/**\n * Sets a testObject reference on context.\n * @param {TestObject} A TestObject instance.\n */\nContext.prototype.setCurrentTest = function(testObject) {\n    this.currentTest = testObject;\n};\n\n/**\n * Removes current test from context.\n */\nContext.prototype.removeCurrentTest = function() {\n    delete this.currentTest;\n};\n\n/**\n * Clears stored instance from constructor function.\n */\nContext.clear = function() {\n    singleton.use().ctx = null;\n};\n\nexport default Context;\n","/**\n *  @type {String}  Error message to display when a hook was called outside of context.\n */\nexport const ERROR_HOOK_CALLED_OUTSIDE = 'hook called outside of a running suite.';\n","\n/**\n * @type {String} Exclusivity group name: only.\n */\nexport const GROUP_NAME_ONLY = 'only';\n\n/**\n * @type {String} Exclusivity group name: skip.\n */\nexport const GROUP_NAME_SKIP = 'skip';\n","import { singleton, throwError } from '../../lib';\nimport { ERROR_HOOK_CALLED_OUTSIDE } from '../constants';\nimport { GROUP_NAME_ONLY, GROUP_NAME_SKIP } from './constants';\n\n/**\n * Adds fields to a specified group.\n * @param {String} group            To add the fields to.\n * @param {String[]|String} item    A field name or a list of field names.\n */\nconst addTo = (group, item) => {\n    const ctx = singleton.useContext();\n\n    if (!item) {\n        return;\n    }\n\n    if (!ctx) {\n        throwError(`${group} ${ERROR_HOOK_CALLED_OUTSIDE}`);\n        return;\n    }\n\n    ctx.exclusive = ctx.exclusive || {};\n\n    [].concat(item).forEach((fieldName) => {\n        if (typeof fieldName === 'string') {\n            ctx.exclusive[group] = ctx.exclusive[group] || {};\n            ctx.exclusive[group][fieldName] = true;\n        }\n    });\n};\n\n/**\n * Adds a field or multiple fields to inclusion group.\n * @param {String[]|String} item Item to be added to inclusion group.\n */\nexport const only = (item) => addTo(GROUP_NAME_ONLY, item);\n\n/**\n * Adds a field or multiple fields to exlusion group.\n * @param {String[]|String} item Item to be added to exlusion group.\n */\nexport const skip = (item) => addTo(GROUP_NAME_SKIP, item);\n\n/**\n * Checks whether a certain field name is excluded by any of the exclusion groups.\n * @param {String} fieldName    FieldN name to test.\n * @returns {Boolean}\n */\nexport const isExcluded = (fieldName) => {\n    const ctx = singleton.useContext();\n\n    if (!(ctx && ctx.exclusive)) {\n        return false;\n    }\n\n    if (\n        ctx.exclusive[GROUP_NAME_SKIP] &&\n        ctx.exclusive[GROUP_NAME_SKIP][fieldName]\n    ) {\n\n        return true;\n    }\n\n    if (ctx.exclusive[GROUP_NAME_ONLY]) {\n        if (ctx.exclusive[GROUP_NAME_ONLY][fieldName]) {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n};\n","/**\n * Describes a test call inside a Vest suite.\n * @param {Object} ctx                  Parent context.\n * @param {String} fieldName            Name of the field being tested.\n * @param {String} statement            The message returned when failing.\n * @param {Promise|Function} testFn     The actual test callbrack or promise.\n */\nfunction TestObject(ctx, fieldName, statement, testFn) {\n    Object.assign(this, {\n        ctx,\n        testFn,\n        fieldName,\n        statement,\n        isWarning: false,\n        failed: false\n    });\n}\n\n/**\n * @returns {Boolean} Current validity status of a test.\n */\nTestObject.prototype.valueOf = function() {\n    return this.failed !== true;\n};\n\n/**\n * Sets a test to failed.\n * @returns {TestObject} Current instance.\n */\nTestObject.prototype.fail = function() {\n    this.ctx.result.markFailure({\n        fieldName: this.fieldName,\n        statement: this.statement,\n        isWarning: this.isWarning\n    });\n\n    this.failed = true;\n    return this;\n};\n\n/**\n * Sets a current test's `isWarning` to true.\n * @returns {TestObject} Current instance.\n */\nTestObject.prototype.warn = function() {\n    this.isWarning = true;\n    return this;\n};\n\nexport default TestObject;\n","import { isExcluded } from '../../hooks/exclusive';\nimport { singleton } from '../../lib';\nimport { TestObject } from './lib';\n\n/**\n * Runs async test.\n * @param {TestObject} testObject A TestObject instance.\n */\nexport const runAsync = (testObject) => {\n    const { testFn, statement, ctx } = testObject;\n\n    const done = () => ctx.result.markAsDone(testObject);\n\n    const fail = (rejectionMessage) => {\n        testObject.statement = typeof rejectionMessage === 'string'\n            ? rejectionMessage\n            : statement;\n\n        testObject.fail();\n\n        done();\n    };\n\n    ctx.setCurrentTest(testObject);\n\n    try {\n        testFn.then(done, fail);\n    } catch (e) {\n        fail();\n    }\n\n    ctx.removeCurrentTest();\n};\n\n/**\n * Runs test callback.\n * @param {TestObject} testObject TestObject instance.\n * @returns {*} Result from test callback.\n */\nconst runTest = (testObject) => {\n    let result;\n\n    testObject.ctx.setCurrentTest(testObject);\n\n    try {\n        result = testObject.testFn.apply(testObject);\n    } catch (e) {\n        result = false;\n    }\n\n    testObject.ctx.removeCurrentTest();\n\n    if (result === false) {\n        testObject.fail();\n    }\n\n    return result;\n};\n\n/**\n * Registers test, if async - adds to pending array\n * @param {TestObject} testObject   A TestObject Instance.\n */\nconst register = (testObject) => {\n    const { testFn, ctx, fieldName } = testObject;\n    let isPending = false;\n\n    if (isExcluded(fieldName)) {\n        ctx.result.addToSkipped(fieldName);\n        return;\n    }\n\n    ctx.result.markTestRun(fieldName);\n\n    const result = runTest(testObject);\n\n    if (result && typeof result.then === 'function') {\n        isPending = true;\n\n        testObject.testFn = result;\n    }\n\n    if (isPending) {\n        ctx.result.setPending(testObject);\n    }\n};\n\n/**\n * Test function used by consumer to provide their own validations.\n * @param {String} fieldName            Name of the field to test.\n * @param {String} [statement]          The message returned in case of a failure.\n * @param {function} testFn             The actual test callback.\n * @return {TestObject}                 A TestObject instance.\n */\nconst test = (fieldName, ...args) => {\n    let statement,\n        testFn;\n\n    if (typeof args[0] === 'string') {\n        [statement, testFn] = args;\n    } else if (typeof args[0] === 'function') {\n        [testFn] = args;\n    }\n\n    if (typeof testFn !== 'function') {\n        return;\n    }\n\n    const testObject = new TestObject(\n        singleton.useContext(),\n        fieldName,\n        statement,\n        testFn\n    );\n\n    register(testObject);\n\n    return testObject;\n};\n\nexport default test;\n","const suiteResult = (name) => {\n    const pending = { tests: [] };\n    const doneCallbacks = [];\n    const fieldCallbacks = {};\n    let isAsync = false;\n\n    /**\n     * Adds a testObject to pending list.\n     * @param {Object} testObject\n     */\n    const setPending = (testObject) => {\n        isAsync = true;\n        pending.tests.push(testObject);\n    };\n\n    /**\n     * Clears a testObject from pending list.\n     * @param {Object} testObject\n     */\n    const clearFromPending = (testObject) => {\n        pending.tests = pending.tests\n            .filter((t) => t !== testObject);\n    };\n\n    /**\n     * Checks if a specified field has any remaining tests.\n     * @param {String} fieldName\n     * @returns {Boolean}\n     */\n    const hasRemaining = (fieldName) => {\n        if (!pending.tests.length) {\n            return false;\n        }\n\n        if (fieldName) {\n            return pending.tests\n                .some((testObject) => testObject.fieldName === fieldName);\n        }\n\n        return !!pending.tests.length;\n    };\n\n    /**\n     * Bumps test counters to indicate tests that are being performed\n     * @param {string} fieldName - The name of the field.\n     */\n    const markTestRun = (fieldName) => {\n\n        if (!output.tests[fieldName]) {\n            output.tests[fieldName] = {\n                testCount: 0,\n                errorCount: 0,\n                warnCount: 0\n            };\n\n            output.tested.push(fieldName);\n        }\n\n        output.tests[fieldName].testCount++;\n        output.testCount++;\n    };\n\n    /**\n     * Marks a test as failed.\n     * @param {Object} testData\n     * @param {String} testData.fieldName       Name of field being tested.\n     * @param {String} [testData.statement]     Failure message to display.\n     * @param {Boolean} [testData.isWarning]    Indicates warn only test.\n     */\n    const markFailure = ({ fieldName, statement, isWarning }) => {\n        if (!output.tests[fieldName]) { return; }\n\n        let severityGroup, severityCount;\n\n        if (isWarning) {\n            severityGroup = 'warnings';\n            severityCount = 'warnCount';\n        } else {\n            severityGroup = 'errors';\n            severityCount = 'errorCount';\n        }\n\n        output.tests[fieldName][severityGroup] =\n            output.tests[fieldName][severityGroup] || [];\n\n        if (statement) {\n            output.tests[fieldName][severityGroup].push(statement);\n        }\n\n        output[severityCount]++;\n        output.tests[fieldName][severityCount]++;\n    };\n\n    /**\n     * Uniquely add a field to the `skipped` list\n     * @param {string} fieldName - The name of the field.\n     */\n    const addToSkipped = (fieldName) => {\n        !output.skipped.includes(fieldName) && output.skipped.push(fieldName);\n    };\n\n    /**\n     * Runs callbacks of specified field, or of the whole suite.\n     * @param {String} [fieldName]\n     */\n    const runCallbacks = (fieldName) => {\n        if (!fieldName) {\n            return doneCallbacks.forEach((cb) => cb(output));\n        }\n\n        if (Array.isArray(fieldCallbacks[fieldName])) {\n            return fieldCallbacks[fieldName].forEach((cb) => cb(output));\n        }\n    };\n\n    /**\n     * Removes a field from pending, and runs its callbacks. If all fields are done, runs all callbacks.\n     * @param {Object} testObject a testObject to remove from pending.\n     */\n    const markAsDone = (testObject) => {\n\n        if (output.canceled) {\n            return;\n        }\n\n        if (testObject) {\n            clearFromPending(testObject);\n            if (!hasRemaining(testObject.fieldName)) {\n                runCallbacks(testObject.fieldName);\n            }\n        }\n\n        if (!hasRemaining()) {\n            runCallbacks();\n        }\n    };\n\n    /**\n     * Registers a callback to run once the suite or a specified field finished running.\n     * @param {String} [name] Name of the field to call back after,\n     * @param {Function} callback A callback to run once validation is finished.\n     * @returns {Object} Output object.\n     */\n    const done = (...args) => {\n        const { length, [length-1]: callback, [length-2]: name } = args;\n\n        if (typeof callback !== 'function') {\n            return output;\n        }\n\n        if (!isAsync) {\n            callback(output);\n            return output;\n        }\n\n        if (name && !hasRemaining(name)) {\n            callback(output);\n            return output;\n        }\n\n        if (name) {\n            fieldCallbacks[name] = fieldCallbacks[name] || [];\n            fieldCallbacks[name].push(callback);\n        } else {\n            doneCallbacks.push(callback);\n        }\n\n        return output;\n    };\n\n    /**\n     * cancels done callbacks. They won't invoke when async operations complete\n     */\n    const cancel = () => {\n        output.canceled = true;\n\n        return output;\n    };\n\n    /**\n     * Collects all fields that have an array of specified group in their results.\n     * @param {String} group Group name (warnings or errors).\n     * @returns {Object} Object of array per field.\n     */\n    const collectFailureMessages = (group) => {\n        const collector = {};\n\n        for (const fieldName in output.tests) {\n            if (output.tests[fieldName] &&\n                output.tests[fieldName][group]) {\n                collector[fieldName] = output.tests[fieldName][group];\n            }\n        }\n\n        return collector;\n    };\n\n    /**\n     * Gets all the errors of a field, or of the whole object.\n     * @param {string} fieldName - The name of the field.\n     * @return {array | object} The field's errors, or all errors.\n     */\n    const getErrors = (fieldName) => {\n        if (!fieldName) {\n            return collectFailureMessages('errors');\n        }\n\n        if (output.tests[fieldName].errors) {\n            return output.tests[fieldName].errors;\n        }\n\n        return [];\n    };\n\n    /**\n     * Gets all the warnings of a field, or of the whole object.\n     * @param {string} [fieldName] - The name of the field.\n     * @return {array | object} The field's warnings, or all warnings.\n     */\n    const getWarnings = (fieldName) => {\n        if (!fieldName) {\n            return collectFailureMessages('warnings');\n        }\n\n        if (output.tests[fieldName].warnings) {\n            return output.tests[fieldName].warnings;\n        }\n\n        return [];\n    };\n\n    /**\n     * Checks if a certain field (or the whole suite) has errors.\n     * @param {string} [fieldName]\n     * @return {boolean}\n     */\n    const hasErrors = (fieldName) => {\n        if (!fieldName) {\n            return !!output.errorCount;\n        }\n\n        return Boolean(\n            output.tests[fieldName] &&\n            output.tests[fieldName].errorCount\n        );\n    };\n\n    /**\n     * Checks if a certain field (or the whole suite) has warnings\n     * @param {string} [fieldName]\n     * @return {boolean}\n     */\n    const hasWarnings = (fieldName) => {\n        if (!fieldName) {\n            return !!output.warnCount;\n        }\n\n        return Boolean(\n            output.tests[fieldName] &&\n            output.tests[fieldName].warnCount\n        );\n    };\n\n    const output = {\n        name,\n        errorCount: 0,\n        warnCount: 0,\n        testCount: 0,\n        tests: {},\n        skipped: [],\n        tested: []\n    };\n\n    Object.defineProperties(output, {\n        hasErrors: {\n            value: hasErrors,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        hasWarnings: {\n            value: hasWarnings,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        getErrors: {\n            value: getErrors,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        getWarnings: {\n            value: getWarnings,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        done: {\n            value: done,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        cancel: {\n            value: cancel,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        }\n    });\n\n    return {\n        markTestRun,\n        markFailure,\n        setPending,\n        addToSkipped,\n        markAsDone,\n        pending: pending.tests,\n        output\n    };\n};\n\nexport default suiteResult;\n","/**\n * @type {String}\n */\nexport const SUITE_INIT_ERROR = 'Suite initialization error.';\n","import { throwError } from '../../lib';\nimport Context from '../Context';\nimport { runAsync } from '../test';\nimport suiteResult from '../suiteResult';\nimport { SUITE_INIT_ERROR } from './constants';\n\n/**\n * Initializes a validation suite, creates a validation context.\n * @param {String} name     Descriptive name for validation suite.\n * @param {Function} tests  Validation suite body.\n * @returns {Object} Vest output object.\n */\nconst validate = (name, tests) => {\n    if (typeof name !== 'string') {\n        return throwError(SUITE_INIT_ERROR + ' Expected name to be a string.', TypeError);\n    }\n\n    if (typeof tests !== 'function') {\n        return throwError(SUITE_INIT_ERROR + ' Expected tests to be a function.', TypeError);\n    }\n\n    const result = suiteResult(name);\n\n    new Context({ result });\n\n    tests();\n\n    Context.clear();\n\n    [...result.pending].forEach(runAsync);\n\n    return result.output;\n};\n\nexport default validate;\n","import { singleton, throwError } from '../../lib';\nimport { ERROR_HOOK_CALLED_OUTSIDE } from '../constants';\n\n/**\n * @returns {Object} Current output object.\n */\nconst draft = () => {\n\n    const ctx = singleton.useContext();\n\n    if (ctx) {\n        return ctx.result.output;\n    }\n\n    throwError('draft ' + ERROR_HOOK_CALLED_OUTSIDE);\n};\n\nexport default draft;\n","/**\n * @type {String} Error message to display when `warn` gets called outside of a test.\n */\nexport const ERROR_OUTSIDE_OF_TEST = 'warn hook called outside of a test callback. It won\\'t have an effect.';\n","import { singleton, throwError } from '../../lib';\nimport { ERROR_HOOK_CALLED_OUTSIDE } from '../constants';\nimport { ERROR_OUTSIDE_OF_TEST } from './constants';\n\n/**\n * Sets a running test to warn only mode.\n */\nconst warn = () => {\n    const ctx = singleton.useContext();\n\n    if (!ctx) {\n        throwError('warn ' + ERROR_HOOK_CALLED_OUTSIDE);\n        return;\n    }\n\n    if (!ctx.currentTest) {\n        throwError(ERROR_OUTSIDE_OF_TEST);\n        return;\n    }\n\n    ctx.currentTest.warn();\n};\n\nexport default warn;\n","/**\n * @type {String} Version number derived from current tag.\n */\nexport const VERSION = VEST_VERSION;\n","import enforce from 'n4s/dist/enforce.min';\nimport any from 'anyone/any';\nimport validate from './core/validate';\nimport { draft, only, skip, warn } from './hooks';\nimport test from './core/test';\nimport { singleton } from './lib';\nimport { VERSION } from './constants';\n\nexport default singleton.register({\n    VERSION,\n    enforce,\n    draft,\n    Enforce: enforce.Enforce,\n    test,\n    any,\n    validate,\n    only,\n    skip,\n    warn\n});\n"],"names":["n","e","module","this","Symbol","iterator","constructor","prototype","t","Object","defineProperty","value","enumerable","configurable","writable","keys","getOwnPropertySymbols","r","filter","getOwnPropertyDescriptor","push","apply","arguments","length","o","forEach","getOwnPropertyDescriptors","defineProperties","hasOwnProperty","call","concat","setTimeout","Error","u","Function","i","Proxy","c","Boolean","Array","isArray","a","f","s","RegExp","test","l","includes","y","p","isNaN","parseFloat","Number","isFinite","b","g","m","v","h","O","d","negativeForm","alias","N","j","isNumber","isString","matches","inside","equals","numberEquals","isNumeric","isEmpty","greaterThan","greaterThanOrEquals","lessThan","lessThanOrEquals","longerThan","longerThanOrEquals","shorterThan","shorterThanOrEquals","lengthEquals","isOdd","isEven","isTruthy","w","E","get","reduce","F","Enforce","global","factory","run","arg","output","err","any","_len","args","_key","some","globalObject","throwError","message","type","VEST_MAJOR","VEST_VERSION","split","SYMBOL_VEST","throwMultipleVestError","versions","join","register","vest","existing","go","VERSION","use","useContext","ctx","Context","parent","singleton","setCurrentTest","testObject","currentTest","removeCurrentTest","clear","ERROR_HOOK_CALLED_OUTSIDE","GROUP_NAME_ONLY","GROUP_NAME_SKIP","addTo","group","item","exclusive","fieldName","only","skip","isExcluded","TestObject","statement","testFn","isWarning","failed","valueOf","fail","result","markFailure","warn","runAsync","done","markAsDone","rejectionMessage","then","runTest","isPending","addToSkipped","markTestRun","setPending","suiteResult","name","pending","tests","doneCallbacks","fieldCallbacks","isAsync","clearFromPending","hasRemaining","testCount","errorCount","warnCount","tested","severityGroup","severityCount","skipped","runCallbacks","cb","canceled","callback","cancel","collectFailureMessages","collector","getErrors","errors","getWarnings","warnings","hasErrors","hasWarnings","SUITE_INIT_ERROR","validate","TypeError","draft","ERROR_OUTSIDE_OF_TEST","enforce"],"mappings":"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"}