"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).vest=t()}(this,(function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e){a.use().ctx=this,Object.assign(this,e)}function n(e,t,n,r){Object.assign(this,{ctx:e,testFn:r,fieldName:t,statement:n,isWarning:!1,failed:!1})}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var r=e((function(e,t){e.exports=function(){function e(e){return!!Array.isArray(e)}function t(e){return"number"==typeof e}function n(e){return"string"==typeof e}function r(e,t){return t instanceof RegExp?t.test(e):"string"==typeof t&&new RegExp(t).test(e)}function s(e,t){return!!(Array.isArray(t)&&["string","number","boolean"].includes(typeof e)||"string"==typeof t&&"string"==typeof e)&&t.includes(e)}function o(e,t){return e===t}function i(e){return!(isNaN(parseFloat(e))||isNaN(Number(e))||!isFinite(e))}function u(e,t){return i(e)&&i(t)&&Number(e)===Number(t)}function a(e){return!e||(i(e)?0===e:Object.prototype.hasOwnProperty.call(e,"length")?0===e.length:"object"!=typeof e||0===Object.keys(e).length)}function l(e,t){return i(e)&&i(t)&&Number(e)>Number(t)}function c(e,t){return i(e)&&i(t)&&Number(e)>=Number(t)}function f(e,t){return i(e)&&i(t)&&Number(e)<Number(t)}function p(e,t){return i(e)&&i(t)&&Number(e)<=Number(t)}function g(e,t){return e.length===t}function d(e){return!!e}function m(e,t,...n){if("function"==typeof e&&!0!==e(t,...n))throw Error(`[Enforce]: invalid ${typeof t} value`)}function h(e={}){let t={...v,...e};if("function"==typeof b.Proxy)return e=>{let n=new Proxy(t,{get:(t,r)=>{if(y(t,r))return(...s)=>(m(t[r],e,...s),n)}});return n};let n=Object.keys(t);return e=>n.reduce((n,r)=>Object.assign(n,{...y(t,r)&&{[r]:(...s)=>(m(t[r],e,...s),n)}}),{})}let y=(e,t)=>((e=Object.prototype.hasOwnProperty.call(e,t)&&"function"==typeof e[t])||function(e){setTimeout(()=>{throw Error(`[enforce]: ${e}`)})}(`Rule "${t}" was not found in rules object. Make sure you typed it correctly.`),e),b=Function("return this")();e.negativeForm="isNotArray",t.negativeForm="isNotNumber",n.negativeForm="isNotString",r.negativeForm="notMatches",s.negativeForm="notInside",o.negativeForm="notEquals",i.negativeForm="isNotNumeric",u.negativeForm="numberNotEquals",a.negativeForm="isNotEmpty",l.alias="gt",c.alias="gte",f.alias="lt",p.alias="lte",g.negativeForm="lengthNotEquals",d.negativeForm="isFalsy";var v=function(e){for(let t in e){let n=e[t].negativeForm,r=e[t].alias;n&&(e[n]=(...n)=>!e[t](...n)),r&&(e[r]=e[t])}return e}({isArray:e,isNumber:t,isString:n,matches:r,inside:s,equals:o,numberEquals:u,isNumeric:i,isEmpty:a,greaterThan:l,greaterThanOrEquals:c,lessThan:f,lessThanOrEquals:p,longerThan:function(e,t){return e.length>t},longerThanOrEquals:function(e,t){return e.length>=t},shorterThan:function(e,t){return e.length<t},shorterThanOrEquals:function(e,t){return e.length<=t},lengthEquals:g,isOdd:e=>!!i(e)&&0!=e%2,isEven:e=>!!i(e)&&0==e%2,isTruthy:d});let N=new h;return N.Enforce=h,N}()})),s=e((function(e,t){e.exports=function(){let e=e=>{if("function"==typeof e)try{return t(e())}catch(e){return!1}return t(e)},t=e=>!!Array.isArray(e)||0!=e&&!!e;return(...t)=>t.some(e)}()}));let o=Function("return this")(),i=(e,t=Error)=>setTimeout(()=>{throw new t(`[Vest]: ${e}`)}),u=Symbol.for("VEST#1");var a={use:()=>o[u],useContext:()=>o[u].ctx,register:e=>{const t=o[u];return t?t.VERSION!==e.VERSION&&i(`Multiple versions of Vest detected: (${[e.VERSION,t.VERSION].join()}).\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version.`):o[u]=e,o[u]}};t.prototype.setCurrentTest=function(e){this.currentTest=e},t.prototype.removeCurrentTest=function(){delete this.currentTest},t.clear=function(){a.use().ctx=null};let l=(e,t)=>{const n=a.useContext();t&&(n?(n.exclusive=n.exclusive||{},[].concat(t).forEach(t=>{"string"==typeof t&&(n.exclusive[e]=n.exclusive[e]||{},n.exclusive[e][t]=!0)})):i(`${e} hook called outside of a running suite.`))};n.prototype.valueOf=function(){return!0!==this.failed},n.prototype.fail=function(){return this.ctx.result.markFailure({fieldName:this.fieldName,statement:this.statement,isWarning:this.isWarning}),this.failed=!0,this},n.prototype.warn=function(){return this.isWarning=!0,this};let c=e=>{const{testFn:t,statement:n,ctx:r}=e,s=()=>r.result.markAsDone(e),o=t=>{e.statement="string"==typeof t?t:n,e.fail(),r.result.markAsDone(e)};r.setCurrentTest(e);try{t.then(s,o)}catch(e){o()}r.removeCurrentTest()},f=e=>{var t=[];const n=[],r={};let s=!1;const o=e=>!!t.length&&(e?t.some(t=>t.fieldName===e):!!t.length),i=e=>e?Array.isArray(r[e])?r[e].forEach(e=>e(a)):void 0:n.forEach(e=>e(a)),u=e=>{const t={};for(const n in a.tests)a.tests[n]&&a.tests[n][e]&&(t[n]=a.tests[n][e]);return t},a={name:e,errorCount:0,warnCount:0,testCount:0,tests:{},skipped:[],tested:[]};return Object.defineProperties(a,{hasErrors:{value:e=>e?!(!a.tests[e]||!a.tests[e].errorCount):!!a.errorCount,writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:e=>e?!(!a.tests[e]||!a.tests[e].warnCount):!!a.warnCount,writable:!0,configurable:!0,enumerable:!1},getErrors:{value:e=>e?a.tests[e].errors?a.tests[e].errors:[]:u("errors"),writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:e=>e?a.tests[e].warnings?a.tests[e].warnings:[]:u("warnings"),writable:!0,configurable:!0,enumerable:!1},done:{value:(...e)=>{const{length:t,[t-1]:i,[t-2]:u}=e;return"function"!=typeof i?a:!s||u&&!o(u)?(i(a),a):(u?(r[u]=r[u]||[],r[u].push(i)):n.push(i),a)},writable:!0,configurable:!0,enumerable:!1},cancel:{value:()=>(a.canceled=!0,a),writable:!0,configurable:!0,enumerable:!1}}),{markTestRun:e=>{a.tests[e]||(a.tests[e]={testCount:0,errorCount:0,warnCount:0},a.tested.push(e)),a.tests[e].testCount++,a.testCount++},markFailure:({fieldName:e,statement:t,isWarning:n})=>{if(a.tests[e]){if(n){n="warnings";var r="warnCount"}else n="errors",r="errorCount";a.tests[e][n]=a.tests[e][n]||[],t&&a.tests[e][n].push(t),a[r]++,a.tests[e][r]++}},setPending:e=>{s=!0,t.push(e)},addToSkipped:e=>{!a.skipped.includes(e)&&a.skipped.push(e)},markAsDone:e=>{a.canceled||(e&&((e=>{t=t.filter(t=>t!==e)})(e),o(e.fieldName)||i(e.fieldName)),o()||i())},pending:t,output:a}};return a.register({Enforce:r.Enforce,VERSION:"1.0.7",enforce:r,draft:()=>{const e=a.useContext();if(e)return e.result.output;i("draft hook called outside of a running suite.")},test:(e,...t)=>{var r;if("string"==typeof t[0]?[s,r]=t:"function"==typeof t[0]&&([r]=t),"function"==typeof r){e=new n(a.useContext(),e,s,r);{const{ctx:n,fieldName:i}=e;t=!1;var s=i;if(s=!(!(r=a.useContext())||!r.exclusive)&&(!(!r.exclusive.skip||!r.exclusive.skip[s])||!!r.exclusive.only&&!r.exclusive.only[s]))n.result.addToSkipped(i);else{n.result.markTestRun(i),e.ctx.setCurrentTest(e);try{var o=e.testFn.apply(e)}catch(e){o=!1}e.ctx.removeCurrentTest(),!1===o&&e.fail(),o&&"function"==typeof o.then&&(t=!0,e.testFn=o),t&&n.result.setPending(e)}}return e}},any:s,validate:(e,n)=>"string"!=typeof e?i("Suite initialization error. Expected name to be a string.",TypeError):"function"!=typeof n?i("Suite initialization error. Expected tests to be a function.",TypeError):(new t({result:e=f(e)}),n(),t.clear(),[...e.pending].forEach(c),e.output),only:e=>l("only",e),skip:e=>l("skip",e),warn:()=>{const e=a.useContext();e?e.currentTest?e.currentTest.warn():i("warn hook called outside of a test callback. It won't have an effect."):i("warn hook called outside of a running suite.")}})}));
//# sourceMappingURL=vest.min.js.map
