!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).vest=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n((function(n,r){n.exports=function(){function n(e){return(n="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)})(e)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var i=function(t,e){var n,r=Object.prototype.hasOwnProperty.call(t,e)&&"function"==typeof t[e];return r||(n='Rule "'.concat(e,'" was not found in rules object. Make sure you typed it correctly.'),setTimeout((function(){throw new Error("[".concat("enforce","]: ").concat(n))}))),r},s=Function("return this")(),a=function(){return"function"==typeof s.Proxy};function c(t){return Boolean(Array.isArray(t))}function f(t){return Boolean("number"==typeof t)}function l(t){return Boolean("string"==typeof t)}function p(t,e){return e instanceof RegExp?e.test(t):"string"==typeof e&&new RegExp(e).test(t)}function y(t,e){return Array.isArray(e)&&["string","number","boolean"].includes(n(t))?e.includes(t):"string"==typeof e&&"string"==typeof t&&e.includes(t)}function g(t,e){return t===e}function v(t){var e=!isNaN(parseFloat(t))&&!isNaN(Number(t))&&isFinite(t);return Boolean(e)}function h(t,e){return v(t)&&v(e)&&Number(t)===Number(e)}function m(t){return!t||(v(t)?0===t:Object.prototype.hasOwnProperty.call(t,"length")?0===t.length:"object"!==n(t)||0===Object.keys(t).length)}function b(t,e){return v(t)&&v(e)&&Number(t)>Number(e)}function d(t,e){return v(t)&&v(e)&&Number(t)>=Number(e)}function w(t,e){return v(t)&&v(e)&&Number(t)<Number(e)}function E(t,e){return v(t)&&v(e)&&Number(t)<=Number(e)}function N(t,e){return t.length===e}function O(t){return!!t}c.negativeForm="isNotArray",f.negativeForm="isNotNumber",l.negativeForm="isNotString",p.negativeForm="notMatches",y.negativeForm="notInside",g.negativeForm="notEquals",v.negativeForm="isNotNumeric",h.negativeForm="numberNotEquals",m.negativeForm="isNotEmpty",b.alias="gt",d.alias="gte",w.alias="lt",E.alias="lte",N.negativeForm="lengthNotEquals",O.negativeForm="isFalsy";var x=function(t){var e=function(e){var n=t[e].negativeForm,r=t[e].alias;n&&(t[n]=function(){return!t[e].apply(t,arguments)}),r&&(t[r]=t[e])};for(var n in t)e(n);return t}({isArray:c,isNumber:f,isString:l,matches:p,inside:y,equals:g,numberEquals:h,isNumeric:v,isEmpty:m,greaterThan:b,greaterThanOrEquals:d,lessThan:w,lessThanOrEquals:E,longerThan:function(t,e){return t.length>e},longerThanOrEquals:function(t,e){return t.length>=e},shorterThan:function(t,e){return t.length<e},shorterThanOrEquals:function(t,e){return t.length<=e},lengthEquals:N,isOdd:function(t){return!!v(t)&&t%2!=0},isEven:function(t){return!!v(t)&&t%2==0},isTruthy:O});function T(t,e){if("function"==typeof t){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];if(!0!==t.apply(void 0,[e].concat(o)))throw new Error("[Enforce]: invalid ".concat(n(e)," value"))}}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u({},x,{},t);if(a())return function(t){var e=new Proxy(n,{get:function(n,r){if(i(n,r))return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return T.apply(void 0,[n[r],t].concat(u)),e}}});return e};var o=Object.keys(n);return function(t){return o.reduce((function(o,s){return e(o,u({},i(n,s)&&r({},s,(function(){for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return T.apply(void 0,[n[s],t].concat(r)),o}))))}),{})}}var S=new k;return S.Enforce=k,S}()})),o=n((function(t,e){var n;t.exports=(n=function(t){if("function"==typeof t)try{var e=t();return 0!=e&&Boolean(e)}catch(t){return!1}return 0!=t&&Boolean(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some(n)})}));var u=Function("return this")(),i=function(t,e){return void 0===e&&(e=Error),setTimeout((function(){throw new e("[Vest]: "+t)}))},s="1.0.4".split(".")[0],a=Symbol.for("VEST#"+s),c=function(){return u[a]},f=c,l=function(){return c().ctx},p=function(t){var e=u[a];return e?e.VERSION!==t.VERSION&&function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i("Multiple versions of Vest detected: ("+t.join()+").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version.")}(t.VERSION,e.VERSION):u[a]=t,u[a]};function y(t){f().ctx=this,e(this,t)}y.prototype.setCurrentTest=function(t){this.currentTest=t},y.prototype.removeCurrentTest=function(){delete this.currentTest},y.clear=function(){f().ctx=null};var g=function(t,e){var n=l();e&&(n?(n.exclusive=n.exclusive||{},[].concat(e).forEach((function(e){"string"==typeof e&&(n.exclusive[t]=n.exclusive[t]||{},n.exclusive[t][e]=!0)}))):i(t+" hook called outside of a running suite."))};function v(t,n,r,o){e(this,{ctx:t,testFn:o,fieldName:n,statement:r,isWarning:!1,failed:!1})}v.prototype.valueOf=function(){return!0!==this.failed},v.prototype.fail=function(){return this.ctx.result.markFailure({fieldName:this.fieldName,statement:this.statement,isWarning:this.isWarning}),this.failed=!0,this},v.prototype.warn=function(){return this.isWarning=!0,this};var h=function(t){var e=t.testFn,n=t.statement,r=t.ctx,o=function(){return r.result.markAsDone(t)},u=function(e){t.statement="string"==typeof e?e:n,t.fail(),o()};r.setCurrentTest(t);try{e.then(o,u)}catch(t){u()}r.removeCurrentTest()},m=function(t){var e,n=t.testFn,r=t.ctx,o=t.fieldName,u=!1;!function(t){var e=l();return!(!e||!e.exclusive)&&(!(!e.exclusive.skip||!e.exclusive.skip[t])||!!e.exclusive.only&&!e.exclusive.only[t])}(o)?(r.result.markTestRun(o),n&&"function"==typeof n.then?u=!0:e=function(t){var e;t.ctx.setCurrentTest(t);try{e=t.testFn.apply(t)}catch(t){e=!1}return t.ctx.removeCurrentTest(),!1===e&&t.fail(),e}(t),e&&"function"==typeof e.then&&(u=!0,t.testFn=e),u&&r.result.setPending(t)):r.result.addToSkipped(o)},b=function(t){var e={tests:[]},n=[],r={},o=!1,u=function(t){return!!e.tests.length&&(t?e.tests.some((function(e){return e.fieldName===t})):!!e.tests.length)},i=function(t){return t?Array.isArray(r[t])?r[t].forEach((function(t){return t(a)})):void 0:n.forEach((function(t){return t(a)}))},s=function(t){var e={};for(var n in a.tests)a.tests[n]&&a.tests[n][t]&&(e[n]=a.tests[n][t]);return e},a={name:t,errorCount:0,warnCount:0,testCount:0,tests:{},skipped:[],tested:[]};return Object.defineProperties(a,{hasErrors:{value:function(t){return t?Boolean(a.tests[t]&&a.tests[t].errorCount):!!a.errorCount},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(t){return t?Boolean(a.tests[t]&&a.tests[t].warnCount):!!a.warnCount},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(t){return t?a.tests[t].errors?a.tests[t].errors:[]:s("errors")},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(t){return t?a.tests[t].warnings?a.tests[t].warnings:[]:s("warnings")},writable:!0,configurable:!0,enumerable:!1},done:{value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length,s=i-1,c=t[s],f=i-2,l=t[f];return"function"!=typeof c?a:o?l&&!u(l)?(c(a),a):(l?(r[l]=r[l]||[],r[l].push(c)):n.push(c),a):(c(a),a)},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){return a.canceled=!0,a},writable:!0,configurable:!0,enumerable:!1}}),{markTestRun:function(t){a.tests[t]||(a.tests[t]={testCount:0,errorCount:0,warnCount:0},a.tested.push(t)),a.tests[t].testCount++,a.testCount++},markFailure:function(t){var e,n,r=t.fieldName,o=t.statement,u=t.isWarning;a.tests[r]&&(u?(e="warnings",n="warnCount"):(e="errors",n="errorCount"),a.tests[r][e]=a.tests[r][e]||[],o&&a.tests[r][e].push(o),a[n]++,a.tests[r][n]++)},setPending:function(t){o=!0,e.tests.push(t)},addToSkipped:function(t){!a.skipped.includes(t)&&a.skipped.push(t)},markAsDone:function(t){a.canceled||(t&&(!function(t){e.tests=e.tests.filter((function(e){return e!==t}))}(t),u(t.fieldName)||i(t.fieldName)),u()||i())},pending:e.tests,output:a}};return p({VERSION:"1.0.4",enforce:r,draft:function(){var t=l();if(t)return t.result.output;i("draft hook called outside of a running suite.")},Enforce:r.Enforce,test:function(t){for(var e,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if("string"==typeof r[0]?(e=r[0],n=r[1]):"function"==typeof r[0]&&(n=r[0]),"function"==typeof n){var u=new v(l(),t,e,n);return m(u),u}},any:o,validate:function(t,e){if("string"!=typeof t)return i("Suite initialization error. Expected name to be a string.",TypeError);if("function"!=typeof e)return i("Suite initialization error. Expected tests to be a function.",TypeError);var n=b(t);return new y({result:n}),e(),y.clear(),
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */
function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var u=arguments[e],i=0,s=u.length;i<s;i++,o++)r[o]=u[i];return r}(n.pending).forEach(h),n.output},only:function(t){return g("only",t)},skip:function(t){return g("skip",t)},warn:function(){var t=l();t?t.currentTest?t.currentTest.warn():i("warn hook called outside of a test callback. It won't have an effect."):i("warn hook called outside of a running suite.")}})}));
//# sourceMappingURL=vest.min.js.map
