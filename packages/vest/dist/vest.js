'use strict';(function(n,p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define(p):(n=n||self,n.vest=p())})(this,function(){function n(b,a){return a={exports:{}},b(a,a.exports),a.exports}function p(b){"@babel/helpers - typeof";p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};
return p(b)}function r(){r=Object.assign||function(b){for(var a=1;a<arguments.length;a++){var d=arguments[a],e;for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b};return r.apply(this,arguments)}function x(b,a){if(null==a||a>b.length)a=b.length;for(var d=0,e=Array(a);d<a;d++)e[d]=b[d];return e}function t(b,a,d,e){r(this,{ctx:b,testFn:e,fieldName:a,statement:d,isWarning:!1,failed:!1})}function q(b){l.use().ctx=this;r(this,b)}var y="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},E=n(function(b,a){!function(a,e){b.exports=e()}(y,function(){var a=function(a){if("function"==typeof a)try{return b(a())}catch(g){return!1}return b(a)},b=function(a){return!!Array.isArray(a)||0!=a&&!!a};return function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return d.some(a)}})}),A=n(function(b,a){!function(a,e){b.exports=e()}(y,function(){function a(){return(a=Object.assign||function(a){for(var m=
1;m<arguments.length;m++){var b,f=arguments[m];for(b in f)Object.prototype.hasOwnProperty.call(f,b)&&(a[b]=f[b])}return a}).apply(this,arguments)}function b(a){return!!Array.isArray(a)}function h(a){return"number"==typeof a}function g(a){return"string"==typeof a}function u(a,b){return b instanceof RegExp?b.test(a):"string"==typeof b&&(new RegExp(b)).test(a)}function l(a,b){return!!(Array.isArray(b)&&["string","number","boolean"].includes(p(a))||"string"==typeof b&&"string"==typeof a)&&b.includes(a)}
function k(a,b){return a===b}function c(a){return!(isNaN(parseFloat(a))||isNaN(Number(a))||!isFinite(a))}function f(a,b){return c(a)&&c(b)&&Number(a)===Number(b)}function C(a){return!a||(c(a)?0===a:Object.prototype.hasOwnProperty.call(a,"length")?0===a.length:"object"!=p(a)||0===Object.keys(a).length)}function D(a,b){return c(a)&&c(b)&&Number(a)>Number(b)}function n(a,b){return c(a)&&c(b)&&Number(a)>=Number(b)}function q(a,b){return c(a)&&c(b)&&Number(a)<Number(b)}function r(a,b){return c(a)&&c(b)&&
Number(a)<=Number(b)}function t(a,b){return a.length===b}function v(a){return!!a}function w(a,b){if("function"==typeof a){for(var f=arguments.length,d=Array(2<f?f-2:0),c=2;c<f;c++)d[c-2]=arguments[c];if(!0!==a.apply(void 0,[b].concat(d)))throw Error("[Enforce]: invalid "+p(b)+" value");}}function x(b){void 0===b&&(b={});var f=a({},B,{},b);if("function"==typeof A.Proxy)return function(a){var b=new Proxy(f,{get:function(f,c){if(y(f,c))return function(){for(var d=arguments.length,e=Array(d),m=0;m<d;m++)e[m]=
arguments[m];return w.apply(void 0,[f[c],a].concat(e)),b}}});return b};var c=Object.keys(f);return function(b){return c.reduce(function(c,d){var e;return a(c,a({},y(f,d)&&((e={})[d]=function(){for(var a=arguments.length,e=Array(a),m=0;m<a;m++)e[m]=arguments[m];return w.apply(void 0,[f[d],b].concat(e)),c},e)))},{})}}var y=function(a,b){return(a=Object.prototype.hasOwnProperty.call(a,b)&&"function"==typeof a[b])||function(a){setTimeout(function(){throw Error("[enforce]: "+a);})}('Rule "'+b+'" was not found in rules object. Make sure you typed it correctly.'),
a},A=Function("return this")();b.negativeForm="isNotArray";h.negativeForm="isNotNumber";g.negativeForm="isNotString";u.negativeForm="notMatches";l.negativeForm="notInside";k.negativeForm="notEquals";c.negativeForm="isNotNumeric";f.negativeForm="numberNotEquals";C.negativeForm="isNotEmpty";D.alias="gt";n.alias="gte";q.alias="lt";r.alias="lte";t.negativeForm="lengthNotEquals";v.negativeForm="isFalsy";var B=function(a){var b,f=function(b){var f=a[b].negativeForm,c=a[b].alias;f&&(a[f]=function(){return!a[b].apply(a,
arguments)});c&&(a[c]=a[b])};for(b in a)f(b);return a}({isArray:b,isNumber:h,isString:g,matches:u,inside:l,equals:k,numberEquals:f,isNumeric:c,isEmpty:C,greaterThan:D,greaterThanOrEquals:n,lessThan:q,lessThanOrEquals:r,longerThan:function(a,b){return a.length>b},longerThanOrEquals:function(a,b){return a.length>=b},shorterThan:function(a,b){return a.length<b},shorterThanOrEquals:function(a,b){return a.length<=b},lengthEquals:t,isOdd:function(a){return!!c(a)&&0!=a%2},isEven:function(a){return!!c(a)&&
0==a%2},isTruthy:v}),z=new x;return z.Enforce=x,z})}),v=Function("return this")(),k=function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Error;return setTimeout(function(){throw new a("[Vest]: ".concat(b));})},w=Symbol["for"]("VEST#".concat("1")),F=function(){for(var b=arguments.length,a=Array(b),d=0;d<b;d++)a[d]=arguments[d];k("Multiple versions of Vest detected: (".concat(a.join(),").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version."))},
B=function(){return v[w]},l={use:B,useContext:function(){return B().ctx},register:function(b){var a=v[w];a?a.VERSION!==b.VERSION&&F(b.VERSION,a.VERSION):v[w]=b;return v[w]}},z=function(b,a){var d=l.useContext();a&&(d?(d.exclusive=d.exclusive||{},[].concat(a).forEach(function(a){"string"===typeof a&&(d.exclusive[b]=d.exclusive[b]||{},d.exclusive[b][a]=!0)})):k("".concat(b," ").concat("hook called outside of a running suite.")))};t.prototype.valueOf=function(){return!0!==this.failed};t.prototype.fail=
function(){this.ctx.result.markFailure({fieldName:this.fieldName,statement:this.statement,isWarning:this.isWarning});this.failed=!0;return this};t.prototype.warn=function(){this.isWarning=!0;return this};var G=function(b){var a=b.testFn,d=b.statement,e=b.ctx,h=function(){return e.result.markAsDone(b)},g=function(a){b.statement="string"===typeof a?a:d;b.fail();h()};e.setCurrentTest(b);try{a.then(h,g)}catch(u){g()}e.removeCurrentTest()};q.prototype.setCurrentTest=function(b){this.currentTest=b};q.prototype.removeCurrentTest=
function(){delete this.currentTest};q.clear=function(){l.use().ctx=null};var H=function(b){var a=[],d=[],e={},h=!1,g=function(b){a=a.filter(function(a){return a!==b})},u=function(b){return a.length?b?a.some(function(a){return a.fieldName===b}):!!a.length:!1},l=function(a){if(!a)return d.forEach(function(a){return a(c)});if(Array.isArray(e[a]))return e[a].forEach(function(a){return a(c)})},k=function(a){var b={},f;for(f in c.tests)c.tests[f]&&c.tests[f][a]&&(b[f]=c.tests[f][a]);return b},c={name:b,
errorCount:0,warnCount:0,testCount:0,tests:{},skipped:[],tested:[]};Object.defineProperties(c,{hasErrors:{value:function(a){return a?!(!c.tests[a]||!c.tests[a].errorCount):!!c.errorCount},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(a){return a?!(!c.tests[a]||!c.tests[a].warnCount):!!c.warnCount},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(a){return a?c.tests[a].errors?c.tests[a].errors:[]:k("errors")},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(a){return a?
c.tests[a].warnings?c.tests[a].warnings:[]:k("warnings")},writable:!0,configurable:!0,enumerable:!1},done:{value:function(){for(var a=arguments.length,b=Array(a),g=0;g<a;g++)b[g]=arguments[g];g=b.length;a=b[g-1];b=b[g-2];if("function"!==typeof a)return c;if(!h||b&&!u(b))return a(c),c;b?(e[b]=e[b]||[],e[b].push(a)):d.push(a);return c},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){c.canceled=!0;return c},writable:!0,configurable:!0,enumerable:!1}});return{markTestRun:function(a){c.tests[a]||
(c.tests[a]={testCount:0,errorCount:0,warnCount:0},c.tested.push(a));c.tests[a].testCount++;c.testCount++},markFailure:function(a){var b=a.fieldName,d=a.statement;if(c.tests[b]){if(a.isWarning){a="warnings";var e="warnCount"}else a="errors",e="errorCount";c.tests[b][a]=c.tests[b][a]||[];d&&c.tests[b][a].push(d);c[e]++;c.tests[b][e]++}},setPending:function(b){h=!0;a.push(b)},addToSkipped:function(a){!c.skipped.includes(a)&&c.skipped.push(a)},markAsDone:function(a){c.canceled||(a&&(g(a),u(a.fieldName)||
l(a.fieldName)),u()||l())},pending:a,output:c}};return l.register({Enforce:A.Enforce,VERSION:"1.0.7",enforce:A,draft:function(){var b=l.useContext();if(b)return b.result.output;k("draft hook called outside of a running suite.")},test:function(b){for(var a,d,e=arguments.length,h=Array(1<e?e-1:0),g=1;g<e;g++)h[g-1]=arguments[g];"string"===typeof h[0]?(a=h[0],d=h[1]):"function"===typeof h[0]&&(d=h[0]);if("function"===typeof d){a=new t(l.useContext(),b,a,d);d=a.ctx;h=a.fieldName;e=!1;if((g=l.useContext())&&
g.exclusive&&(g.exclusive.skip&&g.exclusive.skip[h]||g.exclusive.only&&!g.exclusive.only[h]))d.result.addToSkipped(h);else{d.result.markTestRun(h);a.ctx.setCurrentTest(a);try{var k=a.testFn.apply(a)}catch(I){k=!1}a.ctx.removeCurrentTest();!1===k&&a.fail();k&&"function"===typeof k.then&&(e=!0,a.testFn=k);e&&d.result.setPending(a)}return a}},any:E,validate:function(b,a){if("string"!==typeof b)return k("Suite initialization error. Expected name to be a string.",TypeError);if("function"!==typeof a)return k("Suite initialization error. Expected tests to be a function.",
TypeError);b=H(b);new q({result:b});a();q.clear();a=b.pending;var d=Array.isArray(a)?x(a):void 0;d||(d="undefined"!==typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0);if(!d)a:{if(a){if("string"===typeof a){d=x(a,void 0);break a}d=Object.prototype.toString.call(a).slice(8,-1);"Object"===d&&a.constructor&&(d=a.constructor.name);if("Map"===d||"Set"===d){d=Array.from(d);break a}if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)){d=x(a,void 0);break a}}d=void 0}if(!(a=
d))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");a.forEach(G);return b.output},only:function(b){return z("only",b)},skip:function(b){return z("skip",b)},warn:function(){var b=l.useContext();b?b.currentTest?b.currentTest.warn():k("warn hook called outside of a test callback. It won't have an effect."):k("warn hook called outside of a running suite.")}})})
